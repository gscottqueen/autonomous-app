<html>

<head>
	<title>Autonomous App</title>
	<!-- latest jquery -->
	<script src="http://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<!-- Latest compiled and minified d3 script -->
	<script src="https://d3js.org/d3.v3.min.js"></script>

	<!-- Initiate Firebase -->
	<script src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
	<script>
		// Initialize Firebase
		var config = {
			apiKey: "AIzaSyCnGjGAvkcZ7LEMWTqXgLxSbGgSP8V4BoM",
			authDomain: "autonomous-app.firebaseapp.com",
			databaseURL: "https://autonomous-app.firebaseio.com",
			storageBucket: "autonomous-app.appspot.com",
			messagingSenderId: "610368115071"
		};
		firebase.initializeApp(config);
	</script>

	<!-- insert external js -->
	<script src="external.js"></script>

	<!-- Latest LoDash -->
	<script src="https://cdn.jsdelivr.net/lodash/4.17.2/lodash.min.js"></script>

	<!-- stylesheets -->
	<link rel="stylesheet" href="externall.css">


</head>

<body id="grad">
	<nav class="sidenav">
		<a class="icon" href="#"><span title="Source Data"><img src="./icons/SourceData.png" alt="Data Source"></span></a>
		<a class="icon" href="#"><span title="About"><img src="./icons/About.png" alt="About"></span></a>
		<a class="icon" href="#"><span title="Share"><img src="./icons/Share.png" alt="Share"></span></a>
	</nav>
	<div class="container-fluid">
		<div class="row">
			<div class="leftgutter col-md-12">
				<div class="anchorline col-md-12">
					<h1 class="title">Autonomous Vehicle Incidents</h1>
				</div>
				<div class="row">
					<div class="info1 col-md-3">
						<ul id="incidents">

						</ul>
						<h3>
							Test
						</h3>
						<p>
							Industry trends in, <strong>trending industry.</strong>. Aliquam eget sapien sapien. Curabitur in metus urna. In hac habitasse platea dictumst. Phasellus eu sem sapien, sed vestibulum velit. Nam purus nibh, lacinia non faucibus et, pharetra in
							dolor. Sed iaculis posuere diam ut cursus. <em>Morbi commodo sodales nisi id sodales. Proin consectetur, nisi id commodo imperdiet, metus nunc consequat lectus, id bibendum diam velit et dui.</em> Proin massa magna, vulputate nec bibendum nec,
							posuere nec lacus.Aliquam mi erat, aliquam vel luctus eu, pharetra quis elit. Nulla euismod ultrices massa, et feugiat ipsum consequat eu.
						</p>
					</div>
					<div id="data" class="col-md-9"></div>
				</div>
			</div>
		</div>
	</div>
	<!-- data chart -->
	<script>
		//test the variables

		// Array
		//
		// var incidentByMonth = [
		// 	[1, 2],
		// 	[2, 4]
		// ];

		// Object
		// var incident = {
		// 	incident_id: 1,
		// 	month_id: 1,
		// 	day: 15,
		// 	description: "Here is a description"
		// };

		// NOTE:
		// incident.incident_id  //returns 1
		// incident.month_id  //returns 1
		// incident.day  //returns 15
		// incident.description  //returns Here is a description

		// Object+Array
		var incidents = [{
			incident_id: 1,
			month_id: 1,
			day: 15,
			description: "Here is a description",
		}, {
			incident_id: 2,
			month_id: 1,
			day: 3,
			description: "Here is a description"
		}];

		// call in the json
		var dataset = [{
			x: incidents[1].month_id,
			y: incidents[1].day
		}];
		console.log(dataset);

		// map the months 1-12 to Jan-Dec

		// call the data from api

		firebase.database().ref('/incidents').once('value').then(function(snapshot) {
			var dataset = snapshot.val();
			console.log(incidents);

		});

		//create svg
		var dataSelection = d3.select("#data");

		// Create the SVG Viewport selection
		var svgContainer = dataSelection.append("svg")
			.attr("width", 800)
			.attr("height", 600)

		//  Create the Scale we will use for the Axis
		var xAxisScale = d3.scale.linear()
			.domain([0, 12])
			.range([0, 750]);
		var yAxisScale = d3.scale.linear()
			.domain([0, 24])
			.range([500, 0]);

		// Create the Axis
		var xAxis = d3.svg.axis()
			.scale(xAxisScale)
			.orient("bottom")
			.ticks(12);
		typeof(xAxis)
		var yAxis = d3.svg.axis()
			.scale(yAxisScale)
			.orient("left")
			.ticks(3);
		typeof(yAxis)

		//Create a group Element for the Axis elements and call the xAxis styles and functions
		xAxisGroup = svgContainer.append("g")
			.attr("class", "xaxis")
			.attr("transform", "translate(40,540)")
			.call(xAxis);
		yAxisGroup = svgContainer.append("g")
			.attr("class", "yaxis")
			.attr("transform", "translate(40,40)")
			.call(yAxis);

		//  Plot the data and draw the Cirlces
		svgContainer.selectAll("circle")
			.data(incidents)
			.enter()
			.append("circle")
			.attr("cx", function(d) {
				return xAxisScale(d.month_id);
			})
			.attr("cy", function(d) {
				return yAxisScale(d.day);
			})
			.attr("r", 10)
			.attr("class", "points")
			.attr("transform", "translate(15,40)")
	</script>


	<!-- NOTE: add crash data form modal -->
	<!-- Submit form -->
	<!-- <form class="form-horizontal">
		<fieldset> -->

	<!-- Text input-->
	<!-- <div class="form-group">
				<label class="col-md-4 control-label" for="email">Email</label>
				<div class="col-md-5">
					<input id="email" name="email" type="text" placeholder="user@email.com" class="form-control input-md">

				</div>
			</div> -->

	<!-- Password input-->
	<!-- <div class="form-group">
				<label class="col-md-4 control-label" for="password">Password</label>
				<div class="col-md-5">
					<input id="password" name="password" type="password" placeholder="" class="form-control input-md">

				</div>
			</div> -->

	<!-- Button -->
	<!-- <div class="form-group">
				<label class="col-md-4 control-label" for="singlebutton"></label>
				<div class="col-md-4">
					<button type="submit" id="submit" class="loginButton" style="color:white;background:slateGrey;border:none;width:150px;height:40px;">Login</button>
				</div>
			</div>

		</fieldset>
	</form> -->

</body>

</html>
